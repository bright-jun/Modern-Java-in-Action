# [Chapter 16](https://livebook.manning.com/book/modern-java-in-action/chapter-16/)

# CompletableFuture : 안정적 비동기 프로그래밍

# 이 장의 내용

- 비동기 작업을 만들고 결과 얻기
- 비블록 동작으로 생산성 높이기
- 비동기 API 설계와구현
- 동기 API를 비동기적으로 소비하기
- 두 개 이상의 비동기 연산을 파이프라인으로 만들고 합치기
- 비동기 작업 완료에 대응하기

16장에서는 실용적인 예제를 통해 자바 8에서 제공하는 Future의 구현 CompletableFuture이 비동기 프로그램에 얼마나 큰 도움을 주는지 설명한다. 또한 자바9에서
추가된 내용도 소개할 것이다.

## 16.1 Future의 단순 활용

### 16.1.1 Future 제한

### 16.1.2 CompletableFuture로 비동기 애플리케이션 만들기

## 16.2 비동기 API 구현

### 16.2.1 동기 메서드를 비동기 메서드로 변환

### 16.2.2 에러 처리 방법

## 16.3 비블록 코드 만들기

### 16.3.1 병렬 스트림으로 요청 병렬화하기

### 16.3.2 CompletableFuture로 비동기 호출 구현하기

### 16.3.3 더 확장성이 좋은 해결 방법

### 16.3.4 커스텀 Executor 사용하기

## 16.4 비동기 작업 파이프라인 만들기

### 16.4.1 할인서비스구현

### 16.4.2 할인 서비스 사용

### 16.4.3 동기 작업과 비동기 작업 조합하기

### 16.4.4 독립 CompletableFuture와 비독립 CompletableFuture 합치기

### 16.4.5 Future의 리플렉션과 CompletableFuture의 리플렉션

### 16.4.6 타임아웃 효과적으로 사용하기

## 16.5 CompletableFuture의 종료에 대응하는 방법

### 16.5.1 최저가격 검색 애플리케이션 리팩터링

### 16.5.2 응용

## 16.6 로드맵

## 16.7 마치며

- 한 개 이상의 원격 외부 서비스를 시용하는 긴 동작을 실행할 때는 비동기 방식으로 애플리케이션의 성능과 반응성을 향상시킬 수 있다.
- 우리 고객에게 비동기 API를 제공하는 것을 고려해야 한다. CompletableFuture의 기능을 이용하면 쉽게 비동기 API를 구현할 수 있다.
- CompletableFuture를 이용할 때 비동기 태스크에서 발생한 에러를 관리하고 전달할 수 있다.
- 동기 API를 CompletableFuture로 감싸서 비동기적으로 소비할 수 있다.
- 서로 독립적인 비동기 동작이든 아니면 하나의 비동기 동작이 다른 비동기 동작의 결과에 의존하는 상황이든 여러 비동기 동작을 조립하고 조합할 수 있다.
- CompletableFuture에 콜백을 등록해서 Future가 동작을 끝내고 결과를 생산했을 때 어떤 코드를 실행하도록 지정할 수 있다.
- CompletableFuture 리스트의 모든 값이 완료될 때까지 기다릴지 아니면 첫 값만 완료되길 기다릴지 선택할 수 있다.
- 자바 9에서는 orTimeout, completeOnTimeout 메서드로 CompletableFuture에 비동기 타임아웃 기능을 추가했다.