# [Chapter 14](https://livebook.manning.com/book/modern-java-in-action/chapter-14/)

# ìë°” ëª¨ë“ˆ ì‹œìŠ¤í…œ

## ì´ ì¥ì˜ ë‚´ìš©

- ìë°”ê°€ ì§„í™”í•´ì•¼ í•œë‹¤ëŠ” ì—¬ë¡ ìœ¼ë¡œ ìë°”ê°€ ëª¨ë“ˆ ì‚¬ìŠ¤í…œì„ ì§€ì›í•˜ê¸° ì‹œì‘í•¨
- ì£¼ìš” êµ¬ì¡° : ëª¨ë“ˆ declarations, requires, exports ì§€ì‹œì–´
- ê¸°ì¡´ ìë°” ì•„ì¹´ì´ë¸Œ(JAR)ì— ì ìš©ë˜ëŠ” ìë™ëª¨ë“ˆ
- ëª¨ë“ˆí™”ì™€ JDK ë¼ì´ë¸ŒëŸ¬ë¦¬
- ëª¨ë“ˆê³¼ ë©”ì´ë¸ ë¹Œë“œ
- ê¸°ë³¸ì ì¸ requires, exports ì™¸ì˜ ëª¨ë“ˆ ì§€ì‹œì–´ ê°„ë‹¨ ìš”ì•½


- ëª¨ë“ˆ ì‹œìŠ¤í…œ
    - ìë°” 9ì—ì„œ ê°€ì¥ ë§ì´ ê±°ë¡ 
    - ë‹ˆì½œë¼ì´ íŒ”ë¡œê·¸ Nicolai Parlog ì €, The Java Module System(Manning Publications, 2019) ì°¸ê³ 

## 14.1 ì••ë ¥ : ì†Œí”„íŠ¸ì›¨ì–´ ìœ ì¶”

### 14.1.1 ê´€ì‹¬ì‚¬ë¶„ë¦¬

- ê´€ì‹¬ì‚¬ë¶„ë¦¬(SoC, Separation of concerns)
    - ì»´í“¨í„° í”„ë¡œê·¸ë¨ì„ ê³ ìœ ì˜ ê¸°ëŠ¥ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ë™ì‘ì„ ê¶Œì¥í•˜ëŠ” ì›ì¹™
    - í´ë˜ìŠ¤ë¥¼ ê·¸ë£¹í™”í•œ ëª¨ë“ˆì„ ì´ìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í´ë˜ìŠ¤ ê°„ì˜ ê´€ê³„ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤
        - ì´í•´í•˜ê¸° ì‰½ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ê°„ë‹¨í•œ ì†Œí”„íŠ¸ì›¨ì–´
        - ì¶”ë¡ í•˜ê¸° ì‰¬ìš´ ì†Œí”„íŠ¸ì›¨ì–´
    - ìë°” 9 ëª¨ë“ˆì€ í´ë˜ìŠ¤ê°€ ì–´ë–¤ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë³¼ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì»´íŒŒì¼ ì‹œê°„ì— ì •êµí•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë‹¤
        - íŒ¨í‚¤ì§€ë§Œìœ¼ë¡œëŠ” ëª¨ë“ˆì„±ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤
- ì¥ì 
    - ê°œë³„ ê¸°ëŠ¥ì„ ë”°ë¡œ ì‘ì—…í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ íŒ€ì´ì‰½ê²Œ í˜‘ì—…í•  ìˆ˜ ìˆë‹¤.
    - ê°œë³„ ë¶€ë¶„ì„ ì¬ì‚¬ìš©í•˜ê¸° ì‰½ë‹¤.
    - ì „ì²´ ì‹œìŠ¤í…œì„ ì‰½ê²Œ ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë‹¤.

### 14.1.2 ì •ë³´ ì€ë‹‰

- ì •ë³´ ì€ë‹‰(information hiding)
    - ì„¸ë¶€ êµ¬í˜„ì„ ìˆ¨ê¸°ë„ë¡ ì¥ë ¤í•˜ëŠ” ì›ì¹™

- ìº¡ìŠí™”
    - íŠ¹ì • ì½”ë“œ ì¡°ê°ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ë¶€ë¶„ê³¼ ê³ ë¦½
    - ì„¸ë¶€ êµ¬í˜„ì„ ìˆ¨ê¹€ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì˜ ì–´ë–¤ ë¶€ë¶„ì„ ë°”ê¿¨ì„ ë•Œ ë‹¤ë¥¸ ë¶€ë¶„ê¹Œì§€ ì˜í–¥ì„ ë¯¸ì¹  ê°€ëŠ¥ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤

- ìë°”ì—ì„œëŠ” í´ë˜ìŠ¤ ë‚´ì˜ ì»´í¬ë„ŒíŠ¸ì— ì ì ˆí•˜ê²Œ private í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì»´íŒŒì¼ëŸ¬ë¥¼ ì´ìš©í•´ ìº¡ìŠí™”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ ìë°” 9 ì´ì „ê¹Œì§€ëŠ” í´ë˜ìŠ¤ì™€ íŒ¨í‚¤ì§€ê°€ ì˜ë„ëœ ëŒ€ë¡œ ê³µê°œë˜ì—ˆëŠ”ì§€ë¥¼ ì»´íŒŒì¼ëŸ¬ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ì—†ì—ˆë‹¤.

### 14.1.3 ìë°” ì†Œí”„íŠ¸ì›¨ì–´

- ê´€ì‹¬ì‚¬ë¶„ë¦¬(SoC, Separation of concerns)
    - UML ë‹¤ì´ì–´ê·¸ë¨
        - ê·¸ë£¹ ì½”ë“œ ê°„ì˜ ì˜ì¡´ì„±ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŒ
    - ê·¸ë¦¼ 14-1 ì„¸ ê¸°ëŠ¥ ê°„ì˜ ì˜ì¡´ ê´€ê³„
        - ![Figure 14.1. Three separate concerns with dependencies](https://drek4537l1klr.cloudfront.net/urma2/Figures/14fig01_alt.jpg)
- ì •ë³´ ì€ë‹‰(information hiding)
    - `public`, `protected`, `private` ë“±ì˜ ì ‘ê·¼ ì œí•œìì™€ íŒ¨í‚¤ì§€ ìˆ˜ì¤€ ì ‘ê·¼ ê¶Œí•œ ë“±ì„ ì´ìš©í•´ ë©”ì„œë“œ, í•„ë“œ í´ë˜ìŠ¤ì˜ ì ‘ê·¼ì„ ì œì–´
        - ì›í•˜ëŠ” ì ‘ê·¼ ì œí•œì„ ë‹¬ì„±í•˜ê¸° ì–´ë ¤ìš°ë©° ì‹¬ì§€ì–´ ìµœì¢… ì‚¬ìš©ìì—ê²Œ ì›í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œë„ ê³µê°œí•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒ
        - ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¤ì§€ë©´ì„œ ì˜ì¡´ì„± ì²´ì¸ì´ ë³µì¡í•´ì‹œë©´ì„œ ë¬¸ì œê°€ ë¶€ê°ë˜ê³  ìˆë‹¤
        - ì„¤ê³„ìëŠ” ìì‹ ì˜ í´ë˜ìŠ¤ì—ì„œ ê°œì¸ì ìœ¼ë¡œ ì‚¬ìš©í•  ìš©ë„ë¼ê³  ìƒê°í•  ìˆ˜ ìˆê² ì§€ë§Œ, ê³¼ì •ì´ ì–´ì¨Œë“  ê²°ê³¼ì ìœ¼ë¡œ í´ë˜ìŠ¤ì— public í•„ë“œê°€ ìˆë‹¤ë©´ ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ë‹¹ì—°íˆ
          ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì§€ ì•Šê² ëŠ”ê°€?

## 14.2 ìë°” ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì„¤ê³„í•œ ì´ìœ 

### 14.2.1 ëª¨ë“ˆí™”ì˜ í•œê³„

- ìë°” 9 ì´ì „ê¹Œì§€ëŠ” ëª¨ë“ˆí™”ëœ ì†Œí”„íŠ¸ì›¨ì–´ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“œëŠ” ë° í•œê³„ê°€ ìˆì—ˆìŒ
    - ìë°”ëŠ” ì„¸ ê°€ì§€ ìˆ˜ì¤€ì˜ ì½”ë“œ ê·¸ë£¹í™”ë¥¼ ì œê³µ
        - í´ë˜ìŠ¤
            - ì ‘ê·¼ ì œí•œì, ìº¡ìŠí™” ì œê³µ O
        - íŒ¨í‚¤ì§€
            - ì ‘ê·¼ ì œí•œì, ìº¡ìŠí™” ì œê³µ X
        - JAR
            - ì ‘ê·¼ ì œí•œì, ìº¡ìŠí™” ì œê³µ X

#### ì œí•œëœ ê°€ì‹œì„± ì œì–´

- íŒ¨í‚¤ì§€ì˜ ê°€ì‹œì„± ì œì–´ ê¸°ëŠ¥ì€ ìœ ëª…ë¬´ì‹¤
    - í•œ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¡œ ê³µê°œí•˜ë ¤ë©´ `public`ìœ¼ë¡œ ì´ë“¤ì„ ì„ ì–¸í•´ì•¼ í•œë‹¤
        - ğŸ’¡ why?
        - ![](https://i.stack.imgur.com/hzv3z.png)
    - ì´ë“¤ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ëŠ” ëª¨ë‘ì—ê²Œ ê³µê°œëœë‹¤
    - ë³´í†µ íŒ¨í‚¤ì§€ ë‚´ë¶€ì˜ ì ‘ê·¼ìê°€ `public`ì´ë¯€ë¡œ ì‚¬ìš©ìê°€ ì´ ë‚´ë¶€ êµ¬í˜„ì„ ë§ˆìŒëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
    - ìº¡ìŠí™”ë¥¼ í•˜ëŠ” ë°ì— í•œê³„ê°€ ìˆìŒ

#### í´ë˜ìŠ¤ ê²½ë¡œ

- ìë°” ë‚´ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë²ˆë“¤(ë¬¶ìŒ)í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²•
    - í´ë˜ìŠ¤ë¥¼ ëª¨ë‘ ì»´íŒŒì¼
    - í•œ ê°œì˜ í‰ë²”í•œ JAR íŒŒì¼ì— ë„£ê³  í´ë˜ìŠ¤ ê²½ë¡œì— ì´ JAR íŒŒì¼ì„ ì¶”ê°€
    - JVMì´ ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ ê²½ë¡œì— ì •ì˜ëœ í´ë˜ìŠ¤ë¥¼ í•„ìš”í•  ë•Œ ì½ëŠ”ë‹¤
- ë‹¨ì 
    - JAR ì§€ì˜¥ ë˜ëŠ” í´ë˜ìŠ¤ ê²½ë¡œ ì§€ì˜¥
        - í´ë˜ìŠ¤ ê²½ë¡œì—ëŠ” ê°™ì€ í´ë˜ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ë²„ì „ ê°œë…ì´ ì—†ë‹¤
            - í´ë˜ìŠ¤ ê²½ë¡œì— ë‘ ê°€ì§€ ë²„ì „ì˜ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•  ë•Œ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ì§€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ë‹¤
            - ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ í¬ê¸°ê°€ ì»¤ì§ˆ ìˆ˜ë¡ ì´ëŸ° ë¬¸ì œê°€ ë°œìƒí•¨
        - í´ë˜ìŠ¤ ê²½ë¡œëŠ” ëª…ì‹œì ì¸ ì˜ì¡´ì„±ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤
            - ê°ê°ì˜ JAR ì•ˆì— ìˆëŠ” ëª¨ë“  í´ë˜ìŠ¤ëŠ” classesë¼ëŠ” í•œ ì£¼ë¨¸ë‹ˆë¡œ í•©ì³ì§„ë‹¤.
            - ì¦‰ í•œ JARê°€ ë‹¤ë¥¸ JARì— í¬í•¨ëœ í´ë˜ìŠ¤ ì§‘í•©ì„ ì‚¬ìš©í•˜ë¼ê³  ëª…ì‹œì ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì •ì˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
            - ì´ ìƒí™©ì—ì„œëŠ” í´ë˜ìŠ¤ ê²½ë¡œ ë•Œë¬¸ì— ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ íŒŒì•…í•˜ê¸° ì–´ë ¤ìš°ë©°, ë‹¤ìŒê³¼ê°™ì€ ì˜ë¬¸ì´ ë“ ë‹¤
                - ë¹ ì§„ ê²Œ ìˆëŠ”ê°€?
                - ì¶©ëŒì´ ìˆëŠ”ê°€?
            - JVMì´ `ClassNotFoundException`ê°™ì€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰í•  ë•Œê¹Œì§€ í´ë˜ìŠ¤ ê²½ë¡œì— í´ë˜ìŠ¤ íŒŒì¼ì„
              ë”í•˜ê±°ë‚˜ í´ë˜ìŠ¤ ê²½ë¡œì—ì„œ í´ë˜ìŠ¤ë¥¼ ì œê±°í•´ë³´ëŠ” ìˆ˜ë°–ì— ì—†ë‹¤
- ë©”ì´ë¸ì´ë‚˜ ê·¸ë ˆì´ë“¤ê°™ì€ ë¹Œë“œ ë„êµ¬ë“¤ë¡œ ë¬¸ì œì  í•´ê²°
- ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ë©´ ì»´íŒŒì¼ íƒ€ì„ì— ì´ëŸ° ì¢…ë¥˜ì˜ ì—ëŸ¬ë¥¼ ëª¨ë‘ ê²€ì¶œí•  ìˆ˜ ìˆë‹¤.

### 14.2.2 ê±°ëŒ€í•œ JDK

- ìë°” ê°œë°œ í‚¤íŠ¸(JDK)
    - ìë°” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê³  ì‹¤í–‰í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” ë„êµ¬ì˜ ì§‘í•©
    - javac, java, ëŸ°íƒ€ì„ ì§€ì›ì„ ì œê³µí•˜ëŠ” JDK ë¼ì´ë¸ŒëŸ¬ë¦¬, ì»¬ë ‰ì…˜, ìŠ¤íŠ¸ë¦¼ ë“±
- ë§ì€ ê¸°ìˆ ì´ ì¶”ê°€ë˜ì—ˆë‹¤ê°€ ì‚¬ì¥ë˜ê¸°ë¥¼ ë°˜ë³µ
    - CORBAë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©í•˜ëŠ”ì§€ì™€ ê´€ê³„ì—†ì´ CORBAì˜ í´ë˜ìŠ¤ëŠ” JDKì—
    - ì´ëŠ” ë‚˜ì¤‘ì— ëª¨ë°”ì¼ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ JDK ì „ë¶€ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ” í´ë¼ìš°ë“œì—ì„œ ë¬¸ì œê°€ ë¨
- ì»´íŒ©íŠ¸ í”„ë¡œíŒŒì¼(compact profiles) ê¸°ë²•
    - ê´€ë ¨ ë¶„ì•¼ì— ë”°ë¼ JDK ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¸ ê°€ì§€ í”„ë¡œíŒŒì¼ë¡œ ë‚˜ë‰˜ì–´ ê°ê° ë‹¤ë¥¸ ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸ë¥¼ ì œê³µ
        - ì„ì‹œ ë°©í¸
- JDK ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë§ì€ ë‚´ë¶€ APIëŠ” ê³µê°œë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.
    - ì•ˆíƒ€ê¹ê²Œë„ ìë°” ì–¸ì–´ì˜ ë‚®ì€ ìº¡ìŠí™” ì§€ì› ë•Œë¬¸ì— ë‚´ë¶€ APIê°€ ì™¸ë¶€ì— ê³µê°œë˜ì—ˆë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´ ìŠ¤í”„ë§spring, ë„¤í‹°Netty, ëª¨í‚¤í† Mockito ë“± ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ `sun.misc.Unsafe`ë¦¬ëŠ” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ì´ í´ë˜ìŠ¤ëŠ” JDK
      ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“  í´ë˜ìŠ¤ë‹¤.
    - ê²°ê³¼ì ìœ¼ë¡œ í˜¸í™˜ì„±ì„ ê¹¨ì§€ì•Šê³ ëŠ” ê´€ë ¨ APIë¥¼ ë°”ê¾¸ê¸°ê°€ ì•„ì£¼ ì–´ë ¤ìš´ ìƒí™©ì´ ë˜ì—ˆë‹¤.
- JDK ìì²´ë„ ëª¨ë“ˆí™”í•  ìˆ˜ ìˆëŠ” ìë°” ëª¨ë“ˆ ì‹œìŠ¤í…œ ì„¤ê³„ì˜ í•„ìš”ì„±
    - JDKì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ê³¨ë¼ ì‚¬ìš©í•˜ê³ , í´ë˜ìŠ¤ ê²½ë¡œë¥¼ ì‰½ê²Œ ìœ ì¶”í•  ìˆ˜ ìˆìœ¼ë©°, í”Œë«í¼ì„ ì§„í™”ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ìº¡ìŠí™”ë¥¼ ì œê³µí•  ìƒˆë¡œìš´ ê±´ì¶• êµ¬ì¡°

### 14.2.3 OSGiì™€ ë¹„êµ

- OSGië¥¼ ë“¤ì–´ë³¸ ì ì´ ì—†ëŠ” ë…ìëŠ” ì´ ì ˆì„ ìŠ¤í‚µí•´ë„ ëœë‹¤
- OSGi(Open Service Gateway initiative)
- ![í‘œ 14-1 OSGiì˜ ë²ˆë“¤ ìƒíƒœ](../res/img/table14-1.bmp)
- í”„ë ˆì„ì›Œí¬ ë‚´ì— ê°™ì€ ë²ˆë“¤ì˜ ë‹¤ë¥¸ ë²„ì „ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒë„ OSGi ë§Œì˜ í¥ë¯¸ë¡œìš´ ê¸°ëŠ¥ì´ë‹¤.
- OSGiì˜ ê° ë²ˆë“¤ì´ ìì²´ì ì¸ í´ë˜ìŠ¤ ë¡œë”ë¥¼ ê°–ëŠ” ë°˜ë©´, ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œì˜ ì§ì†ŒëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ë‹¹ í•œ ê°œì˜ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë²„ì „ ì œì–´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.

## 14.3 ìë°” ëª¨ë“ˆ : í° ê·¸ë¦¼

- ëª¨ë“ˆ
    - ìƒˆë¡œìš´ ìë°” í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‹¨ìœ„
    - ìë°” 9 ë¶€í„° ì œê³µ
    - `module`ì´ë¼ëŠ” ìƒˆ í‚¤ì›Œë“œì— ì´ë¦„ê³¼ ë°”ë””ë¥¼ ì¶”ê°€í•´ì„œ ì •ì˜
    - ëª¨ë“ˆ ë””ìŠ¤í¬ë¦½í„°(module descriptor)ëŠ” `module-info.java`ë¼ëŠ” íŠ¹ë³„í•œ íŒŒì¼ì— ì €ì¥
    - ![ê·¸ë¦¼ 14-2 ìë°” ëª¨ë“ˆ ë””ìŠ¤í¬ë¦½í„°ì˜ í•µì‹¬ êµ¬ì¡°(module-info.java)](https://drek4537l1klr.cloudfront.net/urma2/Figures/14fig02_alt.jpg)
    - ì§ì†Œ í¼ì¦ï¼ˆì§ì†Œ í”„ë¡œì íŠ¸ë„ ì´ í¼ì¦ì—ì„œ ì´ë¦„ì´ ìœ ë˜í–ˆì„ ê²ƒìœ¼ë¡œ ì¶”ì •ï¼‰ì— ë¹„ìœ 
        - exportsëŠ” ëŒì¶œë¶€
        - requiresëŠ” íŒ¨ì¸ ë¶€ë¶„
    - ![](https://drek4537l1klr.cloudfront.net/urma2/Figures/14fig03_alt.jpg)
        - ê·¸ë¦¼ 14-3 A, B, C, D ë„¤ ê°œì˜ ëª¨ë“ˆë¡œ ë§Œë“  ìë°” ì‹œìŠ¤í…œì˜ ì§ì†Œ í¼ì¦ í˜•ì‹ ì˜ˆì œ.
        - ëª¨ë“ˆ AëŠ” ëª¨ë“ˆ Bì™€ Cë¥¼ í•„ìš”ë¡œ í•˜ë©° ì´ë“¤ì€ íŒ¨í‚¤ì§€ ëª¨ë“ˆ Bì™€ ëª¨ë“ˆ Cë¥¼ ì´ìš©í•´ ê°ê° pkgBì™€ pkgCì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
        - ëª¨ë“ˆ CëŠ” ë¹„ìŠ·í•œ ë°©ë²•ìœ¼ë¡œ pkgDë¥¼ ì‚¬ìš©í•˜ëŠ”ë° pkgDëŠ” ëª¨ë“ˆ Cì—ì„œ í•„ìš”ë¡œ í•˜ì§€ë§Œ ëª¨ë“ˆ Bì—ì„œëŠ” pkgDë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- ë©”ì´ë¸ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ë•Œ ëª¨ë“ˆì˜ ë§ì€ ì„¸ë¶€ ì‚¬í•­ì„ IDEê°€ ì²˜ë¦¬í•˜ë©° ì‚¬ìš©ìì—ê²ŒëŠ” ì˜ ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

## 14.4 ìë°” ëª¨ë“ˆ ì‹œìŠ¤í…œìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œí•˜ê¸°

- ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œ ì „ë°˜
    - ì‘ì€ ëª¨ë“ˆí™” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¡°í™”í•˜ê³ , íŒ¨í‚¤ì§€í•˜ê³ , ì‹¤í–‰

### 14.4.1 ì• í”Œë¦¬ì¼€ì´ì…˜ì…‹ì—…

- ëª¨ë“ˆí™”
    - ì—¬ëŸ¬ ê¸°ëŠ¥(ê´€ì‹¬ì‚¬)
        - ë‹¤ì–‘í•œì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì½ìŒ(Reader, HttpReader, FileReader)
        - ë‹¤ì–‘í•œ í¬ë§·ìœ¼ë¡œ êµ¬ì„±ëœ ë°ì´í„°ë¥¼ íŒŒì‹±(Parser, JSONParser, ExpenseJSON-Parser)
        - ë„ë©”ì¸ê°ì²´ë¥¼êµ¬ì²´í™” (Expense)
        - í†µê³„ë¥¼ ê³„ìŠ¤íˆê³  ë°˜í™˜ (SummaryCalculator, SummaryStatistics)
        - ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ë¶„ë¦¬ ì¡°ì • (ExpensesApplication)
    - ê¸°ëŠ¥ì„ ê·¸ë£¹í™”
        - `expenses.readers`
        - `expenses.readers.http`
        - `expenses.readers.file`
        - `expenses.parsers`
        - `expenses.parsersj son`
        - `expenses.model`
        - `expenses.statistics`
        - `expenses.application`

- ì‹¤ìƒí™œì—ì„œ ë‹¨ìˆœí•œ í”„ë¡œì íŠ¸ë¥¼ ì´ì²˜ëŸ¼ ì˜ê²Œ ë¶„í•´í•´ ì‘ì€ ê¸°ëŠ¥ê¹Œì§€ ìº¡ìŠí™”í•œë‹¤ë©´ ì¥ì ì— ë¹„í•´ ì´ˆê¸° ë¹„ìš©ì´ ë†’ì•„ì§€ê³ , ì´ê²ƒì´ ê³¼ì—° ì˜³ì€ ê²°ì •ì¸ê°€ ë…¼ë€ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- **í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ê°€ ì ì  ì»¤ì§€ë©´ì„œ ë§ì€ ë‚´ë¶€ êµ¬í˜„ì´ ì¶”ê°€ë˜ë©´ ì´ë•Œë¶€í„° ìº¡ìŠí™”ì™€ ì¶”ë¡ ì˜ ì¥ì ì´ ë‘ë“œëŸ¬ì§„ë‹¤.**
- ìœ„ ëª©ë¡ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ê²½ê³„ì— ì˜ì¡´í•˜ëŠ” íŒ¨í‚¤ì§€ ëª©ë¡ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.
    - ì•„ë§ˆ ê° ëª¨ë“ˆì€ ë‹¤ë¥¸ ëª¨ë“ˆë¡œ ë…¸ì¶œí•˜ê³  ì‹¶ì§€ ì•Šì€ ë‚´ë¶€ êµ¬í˜„ì„ í¬í•¨í•  ê²ƒ
        - ì˜ˆë¥¼ ë“¤ì–´ expenses, statistics ëª¨ë“ˆì€ ì‹¤í—˜ì ì¸ í†µê³„ ë°©ë²•ì„ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•œ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•  ìˆ˜ ìˆë‹¤.
        - ì´ë“¤ íŒ¨í‚¤ì§€ì—ì„œ ì–´ë–¤ ê²ƒì„ ì‚¬ìš©ìì—ê²Œ ë¦´ë¦¬ìŠ¤í• ì§€ëŠ” ë‚˜ì¤‘ì— ê²°ì •í•  ìˆ˜ ìˆë‹¤

### 14.4.2 ì„¸ë¶€ì ì¸ ëª¨ë“ˆí™”ì™€ ê±°ì¹œ ëª¨ë“ˆí™”

ëª¨ë“ˆ í¬ê¸°ì— ë”°ë¥¸ ê¸°ë²•ì°¨ì´

- ì„¸ë¶€ì ì¸ ëª¨ë“ˆí™” ê¸°ë²•
    - ëª¨ë“  íŒ¨í‚¤ì§€ê°€ ìì‹ ì˜ ëª¨ë“ˆì„ ê°–ëŠ”ë‹¤
    - ì´ë“ì— ë¹„í•´ ì„¤ê³„ ë¹„ìš©ì´ ì¦ê°€
- ê±°ì¹œ ëª¨ë“ˆí™” ê¸°ë²•
    - ëŒ€ë¶€ë¶„ì€ í•œ ëª¨ë“ˆì´ ì‹œìŠ¤í…œì˜ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ í¬í•¨
    - ëª¨ë“ˆí™”ì˜ ëª¨ë“  ì¥ì ì„ ìƒëŠ”ë‹¤

- ëª¨ë“ˆí¬ê¸°ë¥¼ ì¡°ìœ¨í•´ë¼
    - ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ì‹œìŠ¤í…œì„ ì‹¤ìš©ì ìœ¼ë¡œ ë¶„í•´í•˜ë©´ì„œ ì§„í™”í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ í”„ë¡œì íŠ¸ê°€ ì´í•´í•˜ê¸° ì‰½ê³  ê³ ì¹˜ê¸° ì‰¬ìš´ ìˆ˜ì¤€ìœ¼ë¡œ ì ì ˆí•˜ê²Œ ëª¨ë“ˆí™”ë˜ì–´ ìˆëŠ”ì§€ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ”
      í”„ë¡œì„¸ìŠ¤ë¥¼ ê°–ëŠ” ê²ƒì´ë‹¤.

> ëª¨ë“ˆí™”ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë¶€ì‹ì˜ ì ì´ë‹¤.

### 14.4.3 ìë°” ëª¨ë“ˆ ì‹œìŠ¤í…œ ê¸°ì´ˆ

- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì§€ì›í•˜ëŠ” í•œ ê°œì˜ ëª¨ë“ˆë§Œ ê°–ëŠ” ê¸°ë³¸ì ì¸ ëª¨ë“ˆí™” ì• í”Œë¦¬ì¼€ì´ì…˜
    ```
    |â”€ expenses.application
      |â”€ module-info.java
      |â”€ com
        |â”€ example
          |â”€ expenses
            |â”€ application
              |â”€ ExpensesApplication.java
    ```
- `module-info.java`
    - ëª¨ë“ˆ ë””ìŠ¤í¬ë¦½í„°ë¡œ ëª¨ë“ˆì˜ ì†ŒìŠ¤ ì½”ë“œ íŒŒì¼ ë£¨íŠ¸ì— ìœ„ì¹˜
    - ëª¨ë“ˆì˜ ì˜ì¡´ì„± ê·¸ë¦¬ê³  ì–´ë–¤ ê¸°ëŠ¥ì„ ì™¸ë¶€ë¡œ ë…¸ì¶œí• ì§€ë¥¼ ì •ì˜
        - ì´ ì˜ˆì œì—ì„œëŠ” ê·¸ ê¸°ëŠ¥ì„ ì•ˆì“°ë¯€ë¡œ ë¹ˆ íŒŒì¼
- ëª¨ë“ˆí™” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
    - ëª…ë ¹ ì‹¤í–‰
      ```
      javac module-info.java
           com/example/expenses/application/ExpensesApplication.java -d target
      
      jar cvfe expenses-application.jar
           com.example.expenses.application.ExpensesApplication -C target
      ```
    - ì–´ë–¤ í´ë”ì™€ í´ë˜ìŠ¤ íŒŒì¼ì´ ìƒì„±ëœ JAR(expenses-application.jar)ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ì¶œë ¥
      ```
      added manifest
      added module-info: module-info.class
      adding: com/(in = 0) (out= 0)(stored 0%)
      adding: com/example/(in = 0) (out= 0)(stored 0%)
      adding: com/example/expenses/(in = 0) (out= 0)(stored 0%)
      adding: com/example/expenses/application/(in = 0) (out= 0)(stored 0%)
      adding: com/example/expenses/application/ExpensesApplication.class(in = 456)
           (out= 306)(deflated 32%)
      ```
    - ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„±ëœ JARë¥¼ ëª¨ë“ˆí™” ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.
      ```
      java --module-path expenses-application.jar \
           --module expenses/com.example.expenses.application.ExpensesApplication
      ```
- java í”„ë¡œê·¸ë¨ìœ¼ë¡œ ìë°” .class íŒŒì¼ì„ ì‹¤í–‰í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°€ì§€ ì˜µì…˜ì´ ìƒˆë¡œ ì¶”ê°€ë˜ì—ˆë‹¤.
    1. -module-path : ì–´ë–¤ ëª¨ë“ˆì„ ë¡œë“œí•  ìˆ˜ ìˆëŠ”ì§€ ì§€ì •í•œë‹¤. ì´ ì˜µì…˜ì€ í´ë˜ìŠ¤ íŒŒì¼ì„ ì§€ì •í•˜ëŠ” --classpath ì¸ìˆ˜ì™€ëŠ” ë‹¤ë¥´ë‹¤.
    2. -module : ì´ ì˜µì…˜ì€ ì‹¤í–‰í•  ë©”ì¸ ëª¨ë“ˆê³¼ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•œë‹¤.
- ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œì—ì„œ ë²„ì „ ì„ íƒ ë¬¸ì œë¥¼ í¬ê²Œ ê³ ë ¤í•˜ì§€ ì•Šì•˜ê³  ë”°ë¼ì„œ ë²„ì „ ê¸°ëŠ¥ì€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ëª¨ë“ˆ ì •ì˜ëŠ” ë²„ì „ ë¬¸ìì—´ì„ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ëŒ€ì‹  ë²„ì „ ë¬¸ì œëŠ” ë¹Œë“œ ë„êµ¬ë‚˜ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•´ê²°í•´ì•¼ í•  ë¬¸ì œë¡œ ë„˜ê²¼ë‹¤.

## 14.5 ì—¬ëŸ¬ ëª¨ë“ˆ í™œìš©í•˜ê¸°

- `expense.reader`ë¼ëŠ” ìƒˆ ëª¨ë“ˆì„ ë§Œë“¤ ê²ƒì´ë‹¤.
- `expenses.application`ì™€ `expenses`, `readers`ë‘ ëª¨ë“ˆê°„ì˜ ìƒí˜¸ ì‘ìš©ì€ ìë°” 9ì—ì„œ ì§€ì •í•œ `export`, `requires`ë¥¼ ì´ìš©í•´
  ì´ë£¨ì–´ì§„ë‹¤

### 14.5.1 exports êµ¬ë¬¸

```java
module expenses.readers {

    exports com.example.expenses.readers;
    exports com.example.expenses.readers.file;
    exports com.example.expenses.readers.http;
}
```

- `exports`ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ ê³µê°œ í˜•ì‹ìœ¼ë¡œ ë§Œë“ ë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“ˆ ë‚´ì˜ ëª¨ë“  ê²ƒì€ ìº¡ìŠí™”
- ëª¨ë“ˆ ì‹œìŠ¤í…œì€ í™”ì´íŠ¸ ë¦¬ìŠ¤íŠ¸ ê¸°ë²•ì„ ì´ìš©í•´ ê°•ë ¥í•œ ìº¡ìŠí™”ë¥¼ ì œê³µ
    - ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ë¬´ì—‡ì¸ì§€ ëª…ì‹œì ìœ¼ë¡œ ê²°ì •í•´ì•¼ í•œë‹¤
    - ì´ ì ‘ê·¼ë²•ì€ ì‹¤ìˆ˜ë¡œ ì–´ë–¤ ê¸°ëŠ¥ì„ ì™¸ë¶€ë¡œ ë…¸ì¶œí•¨ìœ¼ë¡œ ëª‡ ë…„ì´ ì§€ë‚œ ë’¤ì— í•´ì»¤ê°€ ì‹œìŠ¤í…œì„ ë‚¨ìš©í•  ì—¬ì§€ë¥¼ ë°©ì§€í•œë‹¤

```
|â”€ expenses.application
  |â”€ module-info.java
  |â”€ com
    |â”€ example
      |â”€ expenses
        |â”€ application
          |â”€ ExpensesApplication.java

|â”€ expenses.readers
  |â”€ module-info.java
  |â”€ com
    |â”€ example
      |â”€ expenses
        |â”€ readers
          |â”€ Reader.java
        |â”€ file
          |â”€ FileReader.java
        |â”€ http
          |â”€ HttpReader.java
```

### 14.5.2 requires êµ¬ë¶„

```java
module expenses.readers {
    // íŒ¨í‚¤ì§€ëª…ì´ ì•„ë‹ˆë¼ ëª¨ë“ˆëª…ì´ë‹¤
    requires java.base;

    // ëª¨ë“ˆëª…ì´ ì•„ë‹ˆë¼ íŒ¨í‚¤ì§€ëª…ì´ë‹¤
    exports com.example.expenses.readers;
    exports com.example.expenses.readers.file;
    exports com.example.expenses.readers.http;
}
```

- `requires`ëŠ” ì˜ì¡´í•˜ê³  ìˆëŠ” ëª¨ë“ˆì„ ì§€ì •
    - ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ëª¨ë“ˆì€ `java.base`ë¼ëŠ” í”Œë«í¼ ëª¨ë“ˆì— ì˜ì¡´
    - `net`, `io`, `util` ë“±ì˜ ìë°” ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•œë‹¤.
    - í•­ìƒ ê¸°ë³¸ì ìœ¼ë¡œ í•„ìš”í•œ ëª¨ë“ˆì´ë¯€ë¡œ `java.base`ëŠ” ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•  í•„ìš”ê°€ ì—†ë‹¤

#### ìë°” 9ëŠ” í´ë˜ìŠ¤ ê°€ì‹œì„±ì„ ë” ì˜ ì œì–´í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ

- ìë°” 9ì—ì„œëŠ” `requires`ì™€ `exports` êµ¬ë¬¸ì„ ì´ìš©í•´ ì¢€ ë” ì •êµí•˜ê²Œ í´ë˜ìŠ¤ ì ‘ê·¼ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.
- ![](../res/img/table14-2.bmp)

### 14.5.3 ì´ë¦„ ì •í•˜ê¸°

ëª¨ë“ˆì˜ ì´ë¦„ ê·œì¹™

- ì˜¤ë¼í´ì€ íŒ¨í‚¤ì§€ëª…ì²˜ëŸ¼ ì¸í„°ë„· ë„ë©”ì¸ëª…ì„ ì—­ìˆœ(ì˜ˆë¥¼ ë“¤ì–´ `com.iteratrlearning.training`)ìœ¼ë¡œ ëª¨ë“ˆì˜ ì´ë¦„ì„ ì •í•˜ë„ë¡ ê¶Œê³ 
- ëª¨ë“ˆëª…ì€ ë…¸ì¶œëœ ì£¼ìš” API íŒ¨í‚¤ì§€ì™€ ì´ë¦„ì´ê°™ì•„ì•¼ í•œë‹¤ëŠ” ê·œì¹™
- ëª¨ë“ˆëª…ì€ ì‘ì„±ìì˜ ì¸í„°ë„· ë„ë©”ì¸ ëª…ì„ ì—­ìˆœìœ¼ë¡œ ì‹œì‘í•´ì•¼ í•œë‹¤
    - ëª¨ë“ˆì´ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•˜ì§€ ì•Šê±°ë‚˜ ì–´ë–¤ ë‹¤ë¥¸ ì´ìœ ë¡œ ë…¸ì¶œëœ íŒ¨í‚¤ì§€ ì¤‘ í•˜ë‚˜ì™€ ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ìƒí™©ì„ ì œì™¸í•˜ë©´

## 14.6 ì»´íŒŒì¼ê³¼ íŒ¨í‚¤ì§•

ë©”ì´ë¸, ê·¸ë ˆì´ë“¤ ë“±ì˜ ë¹Œë“œ ë„êµ¬ë¥¼ ì´ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼í•  ìˆ˜ ìˆë‹¤

- ê° ëª¨ë“ˆì— pom.xmlì„ ì¶”ê°€
    - ê° ëª¨ë“ˆì€ ë…ë¦½ì ìœ¼ë¡œ ì»´íŒŒì¼ë˜ë¯€ë¡œ ìì²´ì ìœ¼ë¡œ ê°ê°ì´ í•œ ê°œì˜ í”„ë¡œì íŠ¸ì´ë‹¤
      ```
      |â”€ pom.xml
      |â”€ expenses.application
        |â”€ pom.xml
        |â”€ src
          |â”€ main
            |â”€ java
              |â”€ module-info.java
              |â”€ com
                |â”€ example
                  |â”€ expenses
                    |â”€ application
                      |â”€ ExpensesApplication.java
      |â”€ expenses.readers
        |â”€ pom.xml
        |â”€ src
          |â”€ main
            |â”€ java
              |â”€ module-info.java
              |â”€ com
                |â”€ example
                  |â”€ expenses
                    |â”€ readers
                      |â”€ Reader.java
                    |â”€ file
                      |â”€ FileReader.java
                    |â”€ http
                      |â”€ HttpReader.java
      ```
- ì„¸ ê°œì˜ pom.xml íŒŒì¼ì„ ì¶”ê°€í•´ ë©”ì´ë¸ ë””ë ‰í„°ë¦¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì™„ì„±
- ì˜¬ë°”ë¥¸ ëª¨ë“ˆ ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì´ìš©í•˜ë„ë¡ ë©”ì´ë¸ì´ javacë¥¼ ì„¤ì •í•œë‹¤.
- `expenses.readers` í”„ë¡œì íŠ¸ì˜ `pom.xml`
    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
    
        <groupId>com.example</groupId>
        <artifactId>expenses.readers</artifactId>
        <version>1.0</version>
        <packaging>jar</packaging>
        <parent>
            <groupId>com.example</groupId>
            <artifactId>expenses</artifactId>
            <version>1.0</version>
        </parent>
    </project>
    ```
    - pom.xmlì— ë¶€ëª¨ë¥¼ ì •ì˜
        - ë¶€ëª¨ëŠ” ID `expenses`ë¥¼ í¬í•¨í•˜ëŠ” ë¶€ì‚°ë¬¼(artifact)ì´ë‹¤
- `expenses.application` ëª¨ë“ˆì˜ `pom.xml`
    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
    
        <groupId>com.example</groupId>
        <artifactId>expenses.application</artifactId>
        <version>1.0</version>
        <packaging>jar</packaging>
    
        <parent>
            <groupId>com.example</groupId>
            <artifactId>expenses</artifactId>
            <version>1.0</version>
        </parent>
    
        <dependencies>
            <dependency>
                    <groupId>com.example</groupId>
                    <artifactId>expenses.readers</artifactId>
                    <version>1.0</version>
            </dependency>
        </dependencies>
    
    </project>
    ```
    - `expenses.readers`ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€
- ë¹Œë“œ ê³¼ì •ì„ ê°€ì´ë“œí•  ì „ì—­ pom.xmlì„ ì„¤ì •
    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
    
        <groupId>com.example</groupId>
        <artifactId>expenses</artifactId>
        <packaging>pom</packaging>
        <version>1.0</version>
    
        <modules>
        <module>expenses.application</module>
            <module>expenses.readers</module>
        </modules>
    
        <build>
            <pluginManagement>
                <plugins>
                <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                        <version>3.7.0</version>
                    <configuration>
                            <source>9</source>
                            <target>9</target>
                    </configuration>
                </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </project>
    ```
    - ë‘ ê°œì˜ ìì‹ ëª¨ë“ˆ `expenses.application`ì™€ `expenses.readers`ë¥¼ ì°¸ì¡°í•˜ë„ë¡ ì™„ì„±í•œ pom.xml
- JAR ìƒì„±

```
./expenses.application/target/expenses.application-1.0.jar
./expenses.readers/target/expenses.readers-1.0.jar
```

- ëª¨ë“ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰

```
java --module-path \
 ./expenses.application/target/expenses.application-1.0.jar:\
 ./expenses.readers/target/expenses.readers-1.0.jar \
    --module \
 expenses.application/com.example.expenses.application.ExpensesApplication
```

## 14.7 ìë™ ëª¨ë“ˆ

- ë©”ì´ë¸ ì»´íŒŒì¼ëŸ¬ í”ŒëŸ¬ê·¸ì¸ì€ ë¹Œë“œê³¼ì •
    - module-info.javaë¥¼ í¬í•¨í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ë•Œ ëª¨ë“  ì˜ì¡´ì„± ëª¨ë“ˆì„ ê²½ë¡œì— ë†“ì•„ ì ì ˆí•œ JARë¥¼ ë‚´ë ¤ë°›ê³  ì´ë“¤ì´ í”„ë¡œì íŠ¸ì— ì¸ì‹ë˜ë„ë¡ í•œë‹¤.
- `HttpReader`ë¥¼ ì €ìˆ˜ì¤€ìœ¼ë¡œ êµ¬í˜„í•˜ì§€ ì•Šê³  ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ì˜ httpclient ê°™ì€ íŠ¹í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•œë‹¤ê³  ê°€ì •
- expenses.readers í”„ë¡œì íŠ¸ì˜ module-info.javaì— ì´ êµ¬ë¬¸ì„ ì¶”ê°€í•œ í›„. mvn clean packageë¥¼ ì‹¤í–‰í•´ë„ ì—ëŸ¬ê°€ ë°œìƒí•¨
    - ```[ERROR] module not found: httpclient```
- ì˜ì¡´ì„±ì„ ê¸°ìˆ í•˜ë„ë¡ pom.xmlë„ ê°±ì‹ í•´ì•¼ í•¨
    ```
    <dependencies>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.5.3</version>
        </dependency>
    </dependencies>
    ```
- httpclientëŠ” ìë°” ëª¨ë“ˆë¡œ ì‚¬ìš©í•˜ë ¤ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ë° ëª¨ë“ˆí™”ê°€ ë˜ì–´ ìˆì§€ ì•Šì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.
    - ìë°”ëŠ” JARë¥¼ ìë™ ëª¨ë“ˆì´ë¼ëŠ” í˜•íƒœë¡œ ì ì ˆí•˜ê²Œ ë³€í™˜í•œë‹¤.
        - ëª¨ë“ˆ ê²½ë¡œìƒì— ìˆìœ¼ë‚˜ module-info íŒŒì¼ì„ ê°€ì§€ì§€ ì•Šì€ ëª¨ë“  JARëŠ” ìë™ ëª¨ë“ˆì´ ëœë‹¤.
        - ìë™ ëª¨ë“ˆì€ ì•”ë¬µì ìœ¼ë¡œ ìì‹ ì˜ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ë…¸ì¶œì‹œí‚¨ë‹¤.
        - ìë™ ëª¨ë“ˆì˜ ì´ë¦„ì€ JAR ì´ë¦„ì„ ì´ìš©í•´ ì •í•´ì§„ë‹¤.
        - jar ë„êµ¬ì˜ --describe-module ì¸ìˆ˜ë¥¼ ì´ìš©í•´ ìë™ìœ¼ë¡œ ì •í•´ì§€ëŠ” ì´ë¦„ì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
      ```
      jar --file=./expenses.readers/target/dependency/httpclient-4.5.3.jar \
          --describe-module
      httpclient@4.5.3 automatic
      ```
        - ê·¸ëŸ¬ë©´ httpclientë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜ëœë‹¤
- httpclient JARë¥¼ ëª¨ë“ˆ ê²½ë¡œì— ì¶”ê°€í•œ ë‹¤ìŒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰
    ```
    java --module-path \
     ./expenses.application/target/expenses.application-1.0.jar:\
     ./expenses.readers/target/expenses.readers-1.0.jar \
     ./expenses.readers/target/dependency/httpclient-4.5.3.jar \
       --module \
     expenses.application/com.example.expenses.application.ExpensesApplication
    ```

> ë©”ì´ë¸ì—ëŠ” ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ë” ì˜ ì§€ì›í•˜ëŠ” í”„ë¡œì íŠ¸(https://github.com/moditect/moditect)ê°€ ìˆë‹¤.
> ì´ í”„ë¡œì íŠ¸ëŠ” module-info íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.

## 14.8 ëª¨ë“ˆ ì •ì˜ì™€ êµ¬ë¬¸ë“¤

- ëª¨ë“ˆ ì •ì˜ ì–¸ì–´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ í‚¤ì›Œë“œ

### 14.8.1 requires

- `requires` êµ¬ë¬¸ì€ ì»´íŒŒì¼ íƒ€ì„ê³¼ ëŸ°íƒ€ì„ì— í•œ ëª¨ë“ˆì´ ë‹¤ë¥¸ ëª¨ë“ˆì— ì˜ì¡´í•¨ì„ ì •ì˜
    ```java
    module com.iteratrlearning.application {
        requires com.iteratrlearning.ui;
    }
    ```
- `com.iteratrlearning.application`ì€ `com.iteratrlearning.ui`ëª¨ë“ˆì— ì˜ì¡´í•œë‹¤
- `com.iteratrlearning.ui`ì—ì„œ ì™¸ë¶€ë¡œ ë…¸ì¶œí•œ ê³µê°œ í˜•ì‹ì„ `com.iteratrlearning.application`ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 14.8.2 exports

- `exports` êµ¬ë¬¸ì€ ì§€ì •í•œ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ê³µê°œ í˜•ì‹ìœ¼ë¡œ ë§Œë“ ë‹¤
- ì•„ë¬´ íŒ¨í‚¤ì§€ë„ ê³µê°œí•˜ì§€ ì•ŠëŠ” ê²ƒì´ ê¸°ë³¸ ì„¤ì •
- ì–´ë–¤ íŒ¨í‚¤ì§€ë¥¼ ê³µê°œí•  ê²ƒì¸ì§€ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•¨ìœ¼ë¡œ ìº¡ìŠí™”ë¥¼ ë†’ì¼ ìˆ˜ ìˆë‹¤
    ```java
    module com.iteratrlearning.ui {
        // ëª¨ë“ˆëª…ì´ ì¸ìˆ˜
        requires com.iteratrlearning.core;
        // íŒ¨í‚¤ì§€ëª…ì´ ì¸ìˆ˜
        exports com.iteratrlearning.ui.panels;
        exports com.iteratrlearning.ui.widgets;
    }
    ```
- `com.iteratrlearning.ui.panels`, `com.iteratrlearning.ui.widgets` ê³µê°œ

### 14.8.3 requires transitive

- ë‹¤ë¥¸ ëª¨ë“ˆì´ ì œê³µí•˜ëŠ” ê³µê°œ í˜•ì‹ì„ í•œ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  ì§€ì •
    ```java
    module com.iteratrlearning.ui {
        requires transitive com.iteratrlearning.core;
    
        exports com.iteratrlearning.ui.panels;
        exports com.iteratrlearning.ui.widgets;
    }
    
    module com.iteratrlearning.application {
        requires com.iteratrlearning.ui;
    }
    ```
- `com.iteratrlearning.application` ëª¨ë“ˆì€ `com.iteratrlearning.core`ì—ì„œ ë…¸ì¶œí•œ ê³µê°œ í˜•ì‹ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤
- í•„ìš”ë¡œ í•˜ëŠ” ëª¨ë“ˆ(`com.iteratrlearning.ui`)ì´ ë‹¤ë¥¸ ëª¨ë“ˆ(`com.iteratrlearning.core`)ì˜ í˜•ì‹ì„ ë°˜í™˜í•˜ëŠ” ìƒí™©ì—ì„œ
  ì „ì´ì„±(`transitive`)ì„ ì–¸ì„ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- `com.iteratrlearning.application` ëª¨ë“ˆì˜ ë‚´ë¶€ì— `com.iteratrlearning.core` ëª¨ë“ˆì„ ë‹¤ì‹œ ì„ ì–¸í•˜ëŠ” ê²ƒì€ ì„±ê°€ì‹  ì¼ì´ê¸° ë•Œë¬¸
- `com.iteratrlearning.ui` ëª¨ë“ˆì— ì˜ì¡´í•˜ëŠ” ëª¨ë“  ëª¨ë“ˆì€ ìë™ìœ¼ë¡œ `com.iteratrlearning.core` ëª¨ë“ˆì„ ì½ì„ ìˆ˜ ìˆê²Œ ëœë‹¤

### 14.8.4 exports to

- `exports to` êµ¬ë¬¸ì„ ì´ìš©í•´ ì‚¬ìš©ìì—ê²Œ ê³µê°œí•  ê¸°ëŠ¥ì„ ì œí•œí•¨ìœ¼ë¡œ ê°€ì‹œì„±ì„ ì¢€ ë” ì •êµí•˜ê²Œ ì œì–´
    ```java
    module com.iteratrlearning.ui {
        requires com.iteratrlearning.core;
    
        exports com.iteratrlearning.ui.panels;
        exports com.iteratrlearning.ui.widgets to
         com.iteratrlearning.ui.widgetuser;
    }
    ```
- `com.iteratrlearning.ui.widgets`ì˜ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìì˜ ê¶Œí•œì„ `com.iteratrlearning.ui.widgetuser`ë¡œ ì œí•œí•  ìˆ˜
  ìˆë‹¤.

### 14.8.5 openê³¼ opens

- ëª¨ë“ˆ ì„ ì–¸ì— `open` í•œì •ìë¥¼ ì´ìš©í•˜ë©´ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆì— ë°˜ì‚¬ì ìœ¼ë¡œ ì ‘ê·¼ì„ í—ˆìš©í•  ìˆ˜ ìˆë‹¤
    ```java
    open module com.iteratrlearning.ui {
    
    }
    ```
- ë°˜ì‚¬ì ì¸ ì ‘ê·¼ ê¶Œí•œì„ ì£¼ëŠ” ê²ƒ ì´ì™¸ì— open í•œì •ìëŠ” ëª¨ë“ˆì˜ ê°€ì‹œì„±ì— ë‹¤ë¥¸ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤
- ìë°” 9 ì´ì „ì—ëŠ” ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ ê°ì²´ì˜ ë¹„ê³µê°œ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
    - ì§„ì •í•œ ìº¡ìŠí™”ëŠ” ì¡´ì¬í•˜ì§€ ì•Šì•˜ë‹¤.
    - í•˜ì´ë²„ë„¤ì´íŠ¸Hibenate ê°™ì€ ê°ì²´ ê´€ê³„ ë§¤í•‘(Object-relational mapping,ORM) ë„êµ¬ì—ì„œëŠ” ì´ëŸ° ê¸°ëŠ¥ì„ ì´ìš©í•´ ìƒíƒœë¥¼ ì§ì ‘ ê³ ì¹˜ê³¤ í•œë‹¤.
    - ìë°” 9ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬í”Œë ‰ì…˜ì´ ì´ëŸ° ê¸°ëŠ¥ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì´ì œ ê·¸ëŸ° ê¸°ëŠ¥ì´ í•„ìš”í•˜ë©´ ì´ì „ ì½”ë“œì—ì„œ ì„¤ëª…í•œ open êµ¬ë¬¸ì„ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    - ë¦¬í”Œë ‰ì…˜ ë•Œë¬¸ì— ì „ì²´ ëª¨ë“ˆì„ ê°œë°©í•˜ì§€ ì•Šê³ ë„ `opens` êµ¬ë¬¸ì„ ëª¨ë“ˆ ì„ ì–¸ì— ì´ìš©í•´ í•„ìš”í•œ ê°œë³„íŒ¨í‚¤ì§€ë§Œ ê°œë°©í•  ìˆ˜ ìˆë‹¤.
    - `exports-to`ë¡œ ë…¸ì¶œí•œ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“ˆì„ í•œì •í–ˆë˜ ê²ƒì²˜ëŸ¼, `open`ì— `to`ë¥¼ ë¶™ì—¬ì„œ ë°˜ì‚¬ì ì¸ ì ‘ê·¼ì„ íŠ¹ì • ëª¨ë“ˆì—ë§Œ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.

### 14.8.6 usesì™€ provides

- `provides` êµ¬ë¬¸ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì œê³µìë¥¼ `uses` êµ¬ë¬¸ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì†Œë¹„ìë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ
- ì„œë¹„ìŠ¤ì™€ `ServiceLoader`
- The Java Module System ì°¸ê³ 

## 14.9 ë” í° ì˜ˆì œ ê·¸ë¦¬ê³  ë” ë°°ìš¸ ìˆ˜ ìˆëŠ” ë°©ë²•

ì˜¤ë¼í´ì˜ ìë°” ë¬¸ì„œì—ì„œ ê°€ì ¸ì˜¨ ë‹¤ìŒ ì˜ˆì œ

```
module com.example.foo {
    requires com.example.foo.http;
    requires java.logging;

    requires transitive com.example.foo.network;

    exports com.example.foo.bar;
    exports com.example.foo.internal to com.example.foo.probe;

    opens com.example.foo.quux;
    opens com.example.foo.internal to com.example.foo.network,
                                      com.example.foo.probe;

    uses com.example.foo.spi.Intf;
    provides com.example.foo.spi.Intf with com.example.foo.Impl;
}
```

- ìë°” 9ë¡œ ì´ì „í•  ë•Œ EEì™€ê´€ë ¨í•œ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°€ ëª¨ë“ˆí™”ëœ ìë°” 9 ê°€ìƒ ë¨¸ì‹ ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ë¡œë“œë˜ì§€ ì•ŠëŠ”ë‹¤
- í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë ¤ë©´ `-add-modules` ëª…ë ¹í–‰ì„ ì´ìš©í•´ ëª…ì‹œì ìœ¼ë¡œ í•„ìš”í•œ ëª¨ë“ˆì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ `java.xml.bind`ê°€ í•„ìš”í•˜ë©´ `--add-modules java.xml.bind` ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤.


## 14.10 ë§ˆì¹˜ë©°

- ê´€ì‹¬ì‚¬ë¶„ë¦¬ì™€ ì •ë³´ ì€ë‹‰ì€ ì¶”ë¡ í•˜ê¸° ì‰¬ìš´ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë§Œë“œëŠ” ì¤‘ìš”í•œ ë‘ ê°€ì§€ ì›ì¹™ì´ë‹¤.
- ìë°” 9 ì´ì „ì—ëŠ” ê°ê°ì˜ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” íŒ¨í‚¤ì§€, í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ë¡œ ëª¨ë“ˆí™”ë¥¼ êµ¬í˜„í–ˆëŠ”ë° íš¨ê³¼ì ì¸ ìº¡ìŠí™”ë¥¼ ë‹¬ì„±í•˜ê¸°ì—ëŠ” ì—­ë¶€ì¡±ì´ì—ˆë‹¤.
- í´ë˜ìŠ¤ ê²½ë¡œ ì§€ì˜¥ ë¬¸ì œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ì¡´ì„±ì„ ì¶”ë¡ í•˜ê¸° ë”ìš± ì–´ë µê²Œ ë§Œë“¤ì—ˆë‹¤.
- ìë°” 9 ì´ì „ì˜ JDKëŠ” ê±°ëŒ€í–ˆìœ¼ë©° ë†’ì€ ìœ ì§€ ë¹„ìš©ê³¼ ì§„í™”ë¥¼ ë°©í•´í•˜ëŠ” ë¬¸ì œê°€ ì¡´ì¬í–ˆë‹¤.
- ìë°” 9ì—ì„œëŠ” ìƒˆë¡œìš´ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì œê³µí•˜ëŠ”ë° module-info.java íŒŒì¼ì€ ëª¨ë“ˆì˜ ì´ë¦„ì„ ì§€ì •í•˜ë©° í•„ìš”í•œ ì˜ì¡´ì„±(requires)ê³¼ ê³µê°œ API(exports)ë¥¼
  ì •ì˜í•œë‹¤.
- requires êµ¬ë¬¸ìœ¼ë¡œ í•„ìš”í•œ ë‹¤ë¥¸ ëª¨ë“ˆì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
- exports êµ¬ë¬¸ìœ¼ë¡œ íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³µê°œ í˜•ì‹ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- ì¸í„°ë„· ë„ë©”ì¸ëª…ì„ ì—­ìˆœìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ ëª¨ë“ˆ ì´ë¦„ ê·œì¹™ì´ë‹¤.
- ëª¨ë“ˆ ê²½ë¡œì— í¬í•¨ëœ JAR ì¤‘ì— module-info íŒŒì¼ì„ í¬í•¨í•˜ëŠ” ì•ŠëŠ” ëª¨ë“  JARëŠ” ìë™ ëª¨ë“ˆì´ ëœë‹¤.
- ìë™ ëª¨ë“ˆì€ ì•”ë¬µì ìœ¼ë¡œ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ê³µê°œí•œë‹¤.
- ë©”ì´ë¸ì€ ìë°” 9 ëª¨ë“ˆ ì‹œìŠ¤í…œìœ¼ë¡œ êµ¬ì¡°í™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì§€ì›í•œë‹¤.